<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞–Ω–∏–π ‚Äî –¢–∏–ø 9 (–ï–ì–≠)</title>
  <meta name="description" content="–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞–Ω–∏–π –ï–ì–≠ (—Ç–∏–ø 9). –£–∫–∞–∂–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤–æ –≤—Å–µ—Ö —Å–ª–æ–≤–∞—Ö –æ–¥–Ω–æ–≥–æ —Ä—è–¥–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –±—É–∫–≤–∞." />
  <!-- iOS standalone -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="–¢–∏–ø 9 ‚Äî –ï–ì–≠">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìù</text></svg>"> 
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#7c3aed;--muted:#9aa4b2;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:linear-gradient(180deg,#071024 0%, #07183a 60%); color:#e6eef8}
    .app{max-width:920px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;gap:16px}
    .logo{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent),#0ea5e9);display:flex;align-items:center;justify-content:center;font-size:30px}
    h1{margin:0;font-size:20px}
    p.lead{margin:6px 0 18px;color:var(--muted)}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:18px;box-shadow:0 6px 30px rgba(2,6,23,0.6);}
    .question{font-size:18px;margin-bottom:12px}
    .rows{display:grid;gap:10px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .word{background:var(--glass);padding:8px 12px;border-radius:10px;min-width:120px;text-align:center;font-weight:600}
    .options{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
    .opt{background:#07112a;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .opt input{margin-right:8px}
    .controls{display:flex;gap:8px;align-items:center;margin-top:14px}
    button{background:var(--accent);color:white;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    .muted{color:var(--muted);font-size:13px}
    footer{margin-top:18px;display:flex;gap:12px;align-items:center;justify-content:space-between}
    .score{font-weight:700}
    .small{font-size:13px;color:var(--muted)}
    @media(max-width:520px){.options{grid-template-columns:1fr}}
    .success{border-color:rgba(34,197,94,0.4);box-shadow:0 6px 18px rgba(34,197,94,0.06)}
    .wrong{border-color:rgba(239,68,68,0.25);box-shadow:0 6px 18px rgba(239,68,68,0.04)}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo">üìù</div>
      <div>
        <h1>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞–Ω–∏–π ‚Äî –¢–∏–ø 9 (–ï–ì–≠)</h1>
        <p class="lead">–ü–æ–∫–∞–∂–∏, –≤ –∫–∞–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö –≤ –∫–∞–∂–¥–æ–º —Å–ª–æ–≤–µ —Ä—è–¥–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –±—É–∫–≤–∞. –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω –¥–æ–º–∞ (Android / iOS).</p>
      </div>
    </header>
    <main class="card" id="app">
      <div class="question" id="qText">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</div>
      <div class="rows" id="rows"></div>

      <div class="small muted" style="margin-top:10px">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä(–∞) –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ), –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å¬ª.</div>

      <div class="options" id="options"></div>

      <div class="controls">
        <button id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button id="nextBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);">–°–ª–µ–¥—É—é—â–∏–π</button>
        <div style="margin-left:auto" class="muted">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: <span id="score">0</span> / <span id="total">0</span></div>
      </div>

      <footer>
        <div class="small muted">–°–ª–æ–≤–∞—Ä—å –∑–∞–¥–∞–Ω–∏—è —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –∏–∑ —Ç–≤–æ–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–ª–æ–≤.</div>
        <div>
          <button id="showAll" style="background:transparent;border:1px dashed rgba(255,255,255,0.06)">–ü–æ–∫–∞–∑–∞—Ç—å —Å–ª–æ–≤–∞</button>
        </div>
      </footer>
    </main>

    <div class="card" style="margin-top:16px">
      <h3 style="margin:0 0 8px 0">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ‚Äî –∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω</h3>
      <ol class="small muted">
        <li>–û—Ç–∫—Ä–æ–π —ç—Ç–æ—Ç HTML-—Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Chrome/Edge –Ω–∞ Android, Safari –Ω–∞ iPhone).</li>
        <li>–í Android: –Ω–∞–∂–º–∏—Ç–µ ‚ãÆ ‚Üí ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω¬ª.</li>
        <li>–í iPhone (Safari): –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–ü–æ–¥–µ–ª–∏—Ç—å—Å—è¬ª ‚Üí ¬´–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª¬ª.</li>
        <li>–ì–æ—Ç–æ–≤–æ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.</li>
      </ol>
    </div>
  </div>

  <script>
  // === –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ ===
  const WORDS_RAW = `–¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è, –¥–µ–∫–æ—Ä–∞—Ü–∏—è, –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π, –¥–µ–ª–∏–∫–∞—Ç–µ—Å, –¥–µ–ª–∏–∫–∞—Ç–Ω—ã–π, –¥–µ–º–æ–∫—Ä–∞—Ç, –¥–µ–º–æ–∫—Ä–∞—Ç–∏—á–Ω—ã–π, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å, –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è, –¥–∏–∞–ª–æ–≥, –¥–∏–∞–ª–æ–≥–æ–≤—ã–π, –¥–∏–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π, –¥–∏–∞–ø–∞–∑–æ–Ω, –¥–∏–Ω–∞–º–∏–∫–∞, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π, –¥–∏–Ω–∞–º–∏—á–Ω—ã–π, –¥–∏—Ä–∏–∂—ë—Ä, –¥–∏—Ä–∏–∂–∏—Ä–æ–≤–∞—Ç—å, –¥–∏—Å–ø–µ—Ç—á–µ—Ä, –¥–∏—Å–ø–µ—Ç—á–µ—Ä—Å–∫–∏–π, –¥–∏—Å—Ç–∞–Ω—Ü–∏—è, –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–π, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã–π, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∏—Ä–æ–≤–∞—Ç—å, –∂–µ–ª–∞–Ω–∏–µ, –∂–µ–ª–∞—Ç—å, –∂–∏—Ä–∞—Ñ, –∂–æ–∫–µ–π, –∂–æ–Ω–≥–ª–µ—Ä, –∂—é—Ä–∏, –∑–Ω–∞–∫–æ–º–∏—Ç—å, –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, –∑–Ω–∞–∫–æ–º—ã–π, –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π, –∑–Ω–∞–º–µ–Ω–æ–≤–∞—Ç—å, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å, –∏–¥–µ–∞–ª, –∏–¥–µ–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∏–¥–µ–∞–ª–∏—Å—Ç, –∏–¥–µ–∞–ª—å–Ω—ã–π, –∏–∂–¥–∏–≤–µ–Ω–µ—Ü, –∏–ª–ª—é–∑–∏—è, –∏–ª–ª—é–∑–∏–æ–Ω–∏—Å—Ç, –∏–Ω–¥–∏–≤–∏–¥, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π, –∏–Ω–µ–π, –∏–Ω–∂–µ–Ω–µ—Ä, –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π, –∏–Ω–∂–µ–Ω–µ—Ä—Å–∫–∏–π, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω—ã–π, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π, –∏–Ω—Ç–µ–ª–ª–∏–≥–µ–Ω—Ç, –∏–Ω—Ç–µ–ª–ª–∏–≥–µ–Ω—Ç–Ω—ã–π, –∏–Ω—Ç–µ–ª–ª–∏–≥–µ–Ω—Ü–∏—è, –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π, –∏–Ω—Ç–µ—Ä—å–µ—Ä, –∏–Ω—Ç–µ—Ä—å–µ—Ä–Ω—ã–π, –∏—Å–∫–∞–∑–∏—Ç—å, –∏—Å–∫–∞–∂–µ–Ω–∏–µ, –∏—Å—Ç–∏–Ω–∞, –∏—Å—Ç–∏–Ω–Ω—ã–π, –∫–∞–º–ø–∞–Ω–∏—è, –∫–∞–º–æ—Ä–∫–∞, –∫–∞–Ω–∏–∫—É–ª—ã, –∫–∞–Ω–∏—Ç–µ–ª—å, –∫–∞–Ω–æ–Ω–∞–¥–∞, –∫–∞–Ω—Ü–µ–ª—è—Ä–∏—è, –∫–∞–Ω—Ü–µ–ª—è—Ä—Å–∫–∏–π, –∫–∞–ø—é—à–æ–Ω, –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—ã–π, –∫–∞—Ä–∏–∫–∞—Ç—É—Ä–∞, –∫–∞—Ä–∏–∫–∞—Ç—É—Ä–Ω—ã–π, –∫–∞—Ä–∏–∫–∞—Ç—É—Ä–∏—Å—Ç, –∫–∞—Å–∞—Ç–∫–∞, –∫–∞—Ç–∞–∫–æ–º–±–∞, –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞, –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è, –∫–≤–∏—Ç–∞–Ω—Ü–∏—è, –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ, –∫–æ–≤–∞—Ä–Ω—ã–π, –∫–æ–≤–∞—Ä—Å—Ç–≤–æ, –∫–æ–ª–¥—É–Ω, –∫–æ–ª–¥–æ–≤–∞—Ç—å, –∫–æ–ª–¥–æ–≤—Å–∫–æ–π, –∫–æ–ª–µ–±–∞–Ω–∏–µ, –∫–æ–ª–µ–±–∞—Ç—å—Å—è, –∫–æ–ª–ª–µ–∫—Ç–∏–≤, –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã–π, –∫–æ–ª–ª–µ–∫—Ü–∏—è, –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–π, –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å, –∫–æ–ª–æ—Å—Å–∞–ª—å–Ω—ã–π, –∫–æ–ª—ã—Ö–∞—Ç—å, –∫–æ–ª—ã—Ö–∞—Ç—å—Å—è, –∫–æ–º–±–∏–Ω–∞—Ü–∏—è, –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å, –∫–æ–º–µ–¥–∏—è, –∫–æ–º–µ–¥–∏–π–Ω—ã–π, –∫–æ–º–ø–∞–Ω–∏—è, –∫–æ–º–ø–µ—Ç–µ–Ω—Ç–Ω—ã–π, –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ–º–ø—å—é—Ç–µ—Ä, –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–π, –∫–æ–º—Ñ–æ—Ä—Ç, –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π, –∫–æ–Ω–≤–µ—Ä—Ç, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è, –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç, –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è, –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å, –∫–æ–Ω—Ñ–æ—Ä–∫–∞, –∫–æ—Ä–∏—Ñ–µ–π, –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π, –∫–æ—Ä–∑–∏–Ω–∞, –∫–æ—Ä–æ–ª—å, –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ, –∫–æ—Å–∞—Ç–∫–∞, –∫–æ—Å–º–æ—Å, –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π, –∫—Ä–æ–º–µ—à–Ω—ã–π, –ª–∞–±–∏—Ä–∏–Ω—Ç, –ª–∞–¥—å—è, –ª–µ–≥–µ–Ω–¥–∞, –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π, –ª–µ–ª–µ—è—Ç—å, –ª–∏–±–µ—Ä–∞–ª, –ª–∏–±–µ—Ä–∞–ª—å–Ω—ã–π, –ª–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞, –ª–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–π, –º–∞–∂–æ—Ä, –º–∞–∂–æ—Ä–Ω—ã–π, –º–∞—Ç–µ—Ä–∏–∞–ª, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å, –º–≥–Ω–æ–≤–µ–Ω–∏–µ, –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π, –º–µ–Ω—Ç–∞–ª–∏—Ç–µ—Ç, –º–µ–Ω—Ç–∞–ª—å–Ω—ã–π, –º–µ—Ä–∏–¥–∏–∞–Ω, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, –º–µ—Ç–∞—Ñ–æ—Ä–∞, –º–µ—Ç–∞—Ñ–æ—Ä–∏—á–µ—Å–∫–∏–π, –º–µ—Ö–∞–Ω–∏–∑–º, –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–π, –º–∏–Ω–µ—Ä–∞–ª, –º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–π, –º–∏–Ω–æ—Ä, –º–∏–Ω–æ—Ä–Ω—ã–π, –º–æ–Ω–æ–ª–∏—Ç, –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π, –º–æ—Ä–∞—Ç–æ—Ä–∏–π, –º–æ—Ç–∏–≤, –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å, –º–æ—Ç–∏–≤–∞—Ü–∏—è, –º—è—Ç–µ–∂, –º—è—Ç–µ–∂–Ω—ã–π, –Ω–∞–≤–∞–∂–¥–µ–Ω–∏–µ, –Ω–∞—Å–µ–∫–æ–º—ã–µ, –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è, –Ω–∞—Å–ª–∞–∂–¥–µ–Ω–∏–µ, –Ω–µ–¥–æ—Å—è–≥–∞–µ–º—ã–π, –Ω–æ–≤–µ–ª–ª–∞, –æ–±–∞—è–Ω–∏–µ, –æ–±–∞—è—Ç–µ–ª—å–Ω—ã–π, –æ–±–∏—Ç–∞—Ç—å, –æ–±–∏—Ç–∞—Ç–µ–ª—å`;

  const WORDS = WORDS_RAW.split(/,\s*/).map(w => w.trim()).filter(Boolean);

  const letterMap = {};
  WORDS.forEach(w => {
    const letters = Array.from(new Set(w));
    letters.forEach(ch => {
      if (!letterMap[ch]) letterMap[ch] = [];
      letterMap[ch].push(w);
    });
  });

  function rnd(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

  // === –ù–æ–≤—ã–π –∫–æ–¥ ===
  function makeRow(correct=true){
    const candidates = Object.keys(letterMap).filter(ch => letterMap[ch].length >= 3);
    const letter = rnd(candidates);
    const pool = [...new Set(letterMap[letter])];
    const selection = [];
    while(selection.length < 3){
      const pick = rnd(pool);
      if (!selection.includes(pick)) selection.push(pick);
    }

    if (correct){
      const masked = selection.map(w => w.replace(letter, '‚Äî'));
      return {words:selection, masked, letter, correct:true};
    } else {
      const masked = selection.map(w => {
        const letters = Array.from(new Set(w));
        const ch = rnd(letters.filter(c => c!==letter));
        return w.replace(ch, '‚Äî');
      });
      return {words:selection, masked, correct:false};
    }
  }

  function makeQuestion(){
    const rows = [];
    const numCorrect = 2 + Math.floor(Math.random()*2); // 2 –∏–ª–∏ 3
    const correctIdxs = new Set();
    while (correctIdxs.size < numCorrect) correctIdxs.add(Math.floor(Math.random()*6));
    for (let i=0;i<6;i++){
      const correct = correctIdxs.has(i);
      rows.push(makeRow(correct));
    }
    return rows;
  }

  const qText = document.getElementById('qText');
  const rowsEl = document.getElementById('rows');
  const optionsEl = document.getElementById('options');
  const checkBtn = document.getElementById('checkBtn');
  const nextBtn = document.getElementById('nextBtn');
  const scoreEl = document.getElementById('score');
  const totalEl = document.getElementById('total');
  const showAllBtn = document.getElementById('showAll');

  let current = null;
  let score = 0, total = 0;

  function render(){
    current = makeQuestion();
    qText.textContent = '–£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ—Ö —Ä—è–¥–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤–æ –≤—Å–µ—Ö —Ç—Ä—ë—Ö —Å–ª–æ–≤–∞—Ö –ø—Ä–æ–ø—É—â–µ–Ω–∞ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –±—É–∫–≤–∞.';
    rowsEl.innerHTML = '';
    current.forEach((r, idx) => {
      const div = document.createElement('div'); div.className='row';
      const num = document.createElement('div'); num.className='muted'; num.textContent = (idx+1)+')'; num.style.minWidth='24px'; num.style.marginTop='6px';
      div.appendChild(num);
      r.masked.forEach(m => {
        const w = document.createElement('div'); w.className='word'; w.textContent = m; div.appendChild(w);
      });
      rowsEl.appendChild(div);
    });
    optionsEl.innerHTML = '';
    for (let i=0;i<6;i++){
      const lab = document.createElement('label'); lab.className='opt'; lab.style.display='flex'; lab.style.alignItems='center';
      const inp = document.createElement('input'); inp.type='checkbox'; inp.value = i; inp.style.transform='scale(1.1)';
      const span = document.createElement('span'); span.textContent = (i+1)+'. –í—ã–±—Ä–∞—Ç—å'; span.style.fontWeight=700;
      lab.appendChild(inp); lab.appendChild(span);
      optionsEl.appendChild(lab);
    }
  }

  function check(){
    let anySelected=false, correctCount=0, wrongCount=0;
    optionsEl.querySelectorAll('label').forEach((lab,idx)=>{
      const inp = lab.querySelector('input');
      const isCorr = current[idx].correct;
      if (inp.checked){ anySelected=true; }
      lab.classList.remove('success','wrong');
      if (inp.checked && isCorr){ lab.classList.add('success'); correctCount++; }
      if (inp.checked && !isCorr){ lab.classList.add('wrong'); wrongCount++; }
      if (!inp.checked && isCorr){ lab.style.opacity = 0.6; }
    });

    total++;
    if (wrongCount === 0 && correctCount === current.filter(r=>r.correct).length){ score++; }
    scoreEl.textContent = score; totalEl.textContent = total;

    if (!anySelected){ alert('–í—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–ª–∏.'); }
  }

  checkBtn.addEventListener('click', check);
  nextBtn.addEventListener('click', () => { render(); });
  showAllBtn.addEventListener('click', ()=>{
    alert('–°–ª–æ–≤–∞—Ä—å (–∫–æ—Ä–æ—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫):\n' + WORDS.slice(0,120).join(', '));
  });

  render();
  </script>
</body>
</html>
